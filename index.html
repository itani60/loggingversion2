<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Homepage - CompareHub</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="hero-carousel-animations.css">
    <link rel="stylesheet" href="index.css">
    <style>
        @media screen and (min-width: 992px) {
            .search-container {
                width: 75%;
                max-width: 1000px;
            }
        }
        

/* Sidebar User Profile Styles */
.sidebar-login {
    padding: 15px;
    border-bottom: 1px solid #e0e0e0;
}

.sidebar-user-profile {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 15px;
}

.sidebar-avatar {
    width: 48px;
    height: 48px;
    border-radius: 50%;
    background-color: #4285f4; /* Example background */
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 600;
    font-size: 1.2rem;
    flex-shrink: 0;
}

.sidebar-user-info {
    display: flex;
    flex-direction: column;
    line-height: 1.4;
    overflow: hidden;
}

.sidebar-user-name {
    font-weight: 600;
    color: #333;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.sidebar-user-email {
    font-size: 0.85rem;
    color: #666;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

/* Sidebar Buttons */
.sidebar-btn {
    width: 100%;
    padding: 12px;
    border-radius: 8px;
    border: none;
    font-size: 0.95rem;
    font-weight: 500;
    cursor: pointer;
    transition: background-color 0.2s, box-shadow 0.2s;
}

.sidebar-signin-btn {
    background-color: #f80101; /* Your primary color */
    color: white;
}

.sidebar-signin-btn:hover {
    background-color: #d80000; /* Darker primary color */
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.sidebar-signout-btn {
    background-color: #f1f3f4;
    color: #5f6368;
}

.sidebar-signout-btn:hover {
    background-color: #e8eaed;
}

/* Sidebar Profile Link Style */
.sidebar-profile-link {
    display: block;
    text-decoration: none;
    color: inherit;
    border-radius: 8px;
    padding: 8px;
    margin: -8px; /* Counteract padding to maintain alignment */
    transition: background-color 0.2s ease;
}

.sidebar-profile-link:hover {
    background-color: rgba(0, 0, 0, 0.05); /* Gentle hover effect */
}



/* Mobile Search Modal */
.mobile-search-modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: #fff;
    z-index: 1001;
    padding: 15px;
    box-sizing: border-box;
    flex-direction: column;
}

.mobile-search-modal.active {
    display: flex;
}

.mobile-search-modal-header {
    display: flex;
    align-items: center;
    margin-bottom: 15px;
}

.mobile-search-close {
    font-size: 24px;
    margin-right: 15px;
    cursor: pointer;
    color: #333;
}

.mobile-search-form {
    display: flex;
    flex: 1;
    position: relative;
}

.mobile-search-input {
    flex: 1;
    padding: 10px 15px;
    border: 1px solid #ddd;
    border-radius: 4px;
    font-size: 16px;
    outline: none;
}

.mobile-search-button {
    position: absolute;
    right: 10px;
    top: 50%;
    transform: translateY(-50%);
    background: none;
    border: none;
    color: #777;
    cursor: pointer;
}

.mobile-search-suggestions {
    flex: 1;
    overflow-y: auto;
}

.mobile-suggestions-header {
    display: flex;
    align-items: center;
    padding: 10px 0;
    border-bottom: 1px solid #eee;
    margin-bottom: 10px;
}

.mobile-all-results {
    font-weight: bold;
    margin-right: 5px;
}

.mobile-search-query {
    color: #777;
}

.mobile-suggestions-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(100%, 1fr));
    gap: 10px;
}

.mobile-suggestion-item {
    padding: 10px;
    border-radius: 4px;
    transition: background 0.2s;
}

.mobile-suggestion-item:hover {
    background: #f5f5f5;
}

.mobile-suggestion-link {
    display: flex;
    align-items: center;
    text-decoration: none;
    color: inherit;
}

.mobile-suggestion-img {
    width: 40px;
    height: 40px;
    margin-right: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.mobile-suggestion-img img {
    max-width: 100%;
    max-height: 100%;
    object-fit: contain;
}

.mobile-suggestion-icon {
    width: 40px;
    height: 40px;
    margin-right: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #3498db;
}

.mobile-suggestion-name {
    font-size: 14px;
}

.mobile-no-suggestions {
    text-align: center;
    padding: 20px;
    color: #777;
}

@media (min-width: 769px) {
    .mobile-search-modal {
        display: none !important;
    }
}
        
        /* Wishlist Modal Styling */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            z-index: 1000;
            overflow-y: auto;
            padding: 20px;
            box-sizing: border-box;
            backdrop-filter: blur(3px);
            transition: all 0.3s ease;
            opacity: 0;
        }
        
        .modal.visible {
            opacity: 1;
        }
        
        .modal-content {
            background-color: #fff;
            margin: 30px auto;
            max-width: 800px;
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.25);
            overflow: hidden;
            animation: modal-fade-in 0.4s ease;
            transform-origin: center top;
        }
        
        @keyframes modal-fade-in {
            from { opacity: 0; transform: translateY(-30px) scale(0.95); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }
        
        .modal-header {
            padding: 18px 24px;
            border-bottom: 1px solid #eee;
            background-color: #f9f9f9;
            position: relative;
        }
        
        .modal-header h3 {
            margin: 0;
            color: #333;
            font-size: 20px;
            font-weight: 600;
        }
        
        .modal-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .view-all-btn {
            color: #4285f4;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.2s;
            padding: 6px 12px;
            border-radius: 4px;
        }
        
        .view-all-btn:hover {
            color: #2b68ca;
            background-color: rgba(66, 133, 244, 0.1);
        }
        
        .remove-all-btn {
            background-color: transparent;
            border: 1px solid #e0e0e0;
            color: #666;
            padding: 8px 14px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .remove-all-btn:hover {
            background-color: #f5f5f5;
            color: #333;
            border-color: #ccc;
        }
        
        .remove-all-btn i {
            font-size: 12px;
        }
        
        .close-modal, .wishlist-close-modal {
            font-size: 24px;
            color: #999;
            cursor: pointer;
            transition: color 0.2s;
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }
        
        .close-modal:hover, .wishlist-close-modal:hover {
            color: #333;
            background-color: rgba(0, 0, 0, 0.05);
        }
        
        .modal-body {
            padding: 24px;
            max-height: 70vh;
            overflow-y: auto;
            scrollbar-width: thin;
        }
        
        .modal-body::-webkit-scrollbar {
            width: 6px;
        }
        
        .modal-body::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        
        .modal-body::-webkit-scrollbar-thumb {
            background: #ccc;
            border-radius: 10px;
        }
        
        .modal-body::-webkit-scrollbar-thumb:hover {
            background: #aaa;
        }
        
        /* Wishlist items in modal */
        #wishlist-items.wishlist-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 24px;
        }
        
        .wishlist-item {
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.08);
            transition: transform 0.2s, box-shadow 0.2s;
            background-color: #fff;
            position: relative;
        }
        
        .wishlist-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.12);
        }
        
        .wishlist-item-image {
            height: 160px;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #f9f9f9;
            padding: 15px;
        }
        
        .wishlist-item-image img {
            max-height: 100%;
            max-width: 100%;
            object-fit: contain;
        }
        
        .wishlist-item-details {
            padding: 15px;
        }
        
        .wishlist-item-title {
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 16px;
            color: #333;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            text-overflow: ellipsis;
            height: 40px;
        }
        
        .wishlist-item-price {
            color: #4285f4;
            font-weight: 600;
            font-size: 18px;
            margin-bottom: 12px;
        }
        
        .wishlist-item-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .wishlist-view-btn {
            background-color: #4285f4;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.2s;
            flex: 1;
            text-align: center;
            text-decoration: none;
        }
        
        .wishlist-view-btn:hover {
            background-color: #2b68ca;
        }
        
        .wishlist-remove-btn {
            background: none;
            border: none;
            color: #999;
            cursor: pointer;
            font-size: 18px;
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            margin-left: 8px;
            transition: all 0.2s;
        }
        
        .wishlist-remove-btn:hover {
            color: #f44336;
            background-color: rgba(244, 67, 54, 0.1);
        }
        
        /* Empty wishlist in modal */
        #modal-empty-wishlist {
            text-align: center;
            padding: 60px 20px;
            animation: fade-in 0.5s ease;
        }
        
        @keyframes fade-in {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        #modal-empty-wishlist i {
            font-size: 64px;
            color: #ddd;
            margin-bottom: 20px;
            display: block;
        }
        
        #modal-empty-wishlist p {
            margin: 8px 0;
            color: #555;
            font-size: 18px;
        }
        
        #modal-empty-wishlist .empty-wishlist-subtext {
            font-size: 15px;
            color: #888;
            max-width: 300px;
            margin: 10px auto;
        }
        
        #modal-empty-wishlist .browse-products-btn {
            display: inline-block;
            margin-top: 20px;
            background-color: #4285f4;
            color: white;
            text-decoration: none;
            padding: 10px 20px;
            border-radius: 6px;
            font-weight: 500;
            transition: background-color 0.2s;
        }
        
        #modal-empty-wishlist .browse-products-btn:hover {
            background-color: #2b68ca;
        }
        
        /* Responsive adjustments */
        @media (max-width: 768px) {
            .modal-content {
                margin: 15px auto;
                max-width: 100%;
            }
            
            #wishlist-items.wishlist-grid {
                grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
                gap: 15px;
            }
            
            .modal-header {
                padding: 15px;
            }
            
            .modal-body {
                padding: 15px;
            }
            
            .wishlist-item-image {
                height: 120px;
            }
        }
        
        @media (max-width: 480px) {
            #wishlist-items.wishlist-grid {
                grid-template-columns: 1fr 1fr;
                gap: 12px;
            }
            
            .wishlist-item-title {
                font-size: 14px;
                height: 36px;
            }
            
            .wishlist-item-price {
                font-size: 16px;
            }
            
            .wishlist-view-btn {
                padding: 6px 10px;
                font-size: 13px;
            }
        }
        
        /* Notification System */
        .notification-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 9999;
            max-width: 350px;
        }
        
        .notification {
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            margin-bottom: 10px;
            overflow: hidden;
            transform: translateX(120%);
            animation: slide-in 0.4s forwards;
        }
        
        .notification.success {
            border-left: 4px solid #4CAF50;
        }
        
        .notification.error {
            border-left: 4px solid #F44336;
        }
        
        .notification-content {
            padding: 15px 20px;
            display: flex;
            align-items: center;
        }
        
        .notification-icon {
            margin-right: 15px;
            font-size: 20px;
        }
        
        .notification.success .notification-icon {
            color: #4CAF50;
        }
        
        .notification.error .notification-icon {
            color: #F44336;
        }
        
        .notification-message {
            flex: 1;
        }
        
        .notification-title {
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .notification-close {
            background: none;
            border: none;
            color: #999;
            cursor: pointer;
            font-size: 16px;
            margin-left: 10px;
        }
        
        .notification-progress {
            height: 3px;
            background-color: #e0e0e0;
        }
        
        .notification-progress-bar {
            height: 100%;
            width: 100%;
            background-color: #4CAF50;
            animation: progress 3s linear forwards;
        }
        
        .notification.error .notification-progress-bar {
            background-color: #F44336;
        }
        
        @keyframes slide-in {
            to { transform: translateX(0); }
        }
        
        @keyframes progress {
            to { width: 0%; }
        }
        
        @keyframes fade-out {
            to { opacity: 0; }
        }
        
        /* Login Modal Styling - Based on login.html design */
        .login-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(4px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s cubic-bezier(0.4, 0.0, 0.2, 1);
            padding: 20px;
        }

        .login-modal.active {
            opacity: 1;
            visibility: visible;
        }

        .login-modal-container {
            width: 100%;
            max-width: 480px;
            background: white;
            border-radius: 16px;
            box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
            overflow: hidden;
            transform: translateY(30px) scale(0.9);
            transition: all 0.3s cubic-bezier(0.4, 0.0, 0.2, 1);
            position: relative;
            animation: slideUp 0.8s cubic-bezier(0.16, 1, 0.3, 1);
        }

        .login-modal.active .login-modal-container {
            transform: translateY(0) scale(1);
        }

        .login-modal-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #f80101, #ff5757);
        }

        .login-modal-header {
            padding: 40px 40px 20px;
            text-align: center;
            position: relative;
        }

        .login-modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            background: none;
            border: none;
            font-size: 24px;
            color: #666;
            cursor: pointer;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }

        .login-modal-close:hover {
            background: rgba(0, 0, 0, 0.1);
            color: #333;
        }

        .login-modal-logo-container {
            width: 100%;
            max-width: 300px;
            height: 120px;
            margin: 0 auto 25px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .login-modal-logo-container img {
            width: 90%;
            height: 90%;
            object-fit: contain;
            border-radius: 16px;
        }

        .login-modal-form-container {
            padding: 40px;
        }

        .login-modal-form-header {
            text-align: center;
            margin-bottom: 25px;
        }

        .login-modal-form-header h2 {
            color: #333;
            font-size: 1.6rem;
            font-weight: 600;
            margin-bottom: 6px;
            letter-spacing: -0.02em;
        }

        .login-modal-form-header p {
            color: #666;
            font-size: 0.95rem;
            font-weight: 400;
            line-height: 1.5;
        }

        .login-modal-form-group {
            margin-bottom: 20px;
            position: relative;
            animation: fadeInUp 0.6s ease-out;
            animation-fill-mode: both;
        }

        .login-modal-form-group:nth-child(1) { animation-delay: 0.1s; }
        .login-modal-form-group:nth-child(2) { animation-delay: 0.2s; }

        .login-modal-form-group label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 500;
            font-size: 0.95rem;
        }

        .login-modal-input-wrapper {
            position: relative;
        }

        .login-modal-form-group input {
            width: 100%;
            padding: 12px 14px;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-size: 0.95rem;
            font-family: inherit;
            background: #fafafa;
            transition: all 0.3s ease;
            outline: none;
            font-weight: 400;
            box-sizing: border-box;
        }

        .login-modal-form-group input::placeholder {
            color: #666;
            opacity: 0.7;
        }

        .login-modal-form-group input:focus {
            border-color: #f80101;
            background: white;
            box-shadow: 0 0 0 3px rgba(248, 1, 1, 0.1);
        }

        .login-modal-password-toggle {
            position: absolute;
            right: 16px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: #666;
            cursor: pointer;
            font-size: 1.1rem;
            padding: 4px;
            border-radius: 4px;
            transition: all 0.2s ease;
        }

        .login-modal-password-toggle:hover {
            color: #f80101;
            background: rgba(248, 1, 1, 0.1);
        }

        .login-modal-forgot-password {
            text-align: right;
            margin: -6px 0 20px;
        }

        .login-modal-forgot-password a {
            color: #f80101;
            font-size: 0.9rem;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .login-modal-forgot-password a:hover {
            color: #d80000;
            text-decoration: underline;
        }

        .login-modal-btn {
            width: 100%;
            border-radius: 6px;
            font-size: 0.95rem;
            font-weight: 600;
            padding: 14px 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            background: linear-gradient(135deg, #f80101, #d80000);
            color: white;
            border: none;
            animation: fadeInUp 0.6s ease-out 0.6s both;
        }

        .login-modal-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .login-modal-btn:hover::before {
            left: 100%;
        }

        .login-modal-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(248, 1, 1, 0.3);
        }

        .login-modal-btn:active {
            transform: translateY(0);
        }

        .login-modal-btn:disabled {
            background: #666;
            color: white;
            cursor: not-allowed;
            transform: none;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .login-modal-register-link {
            text-align: center;
            margin-top: 20px;
            color: #666;
            font-size: 0.9rem;
        }

        .login-modal-register-link a {
            color: #f80101;
            font-weight: 500;
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .login-modal-register-link a:hover {
            color: #d80000;
            text-decoration: underline;
        }

        .login-modal-spinner {
            width: 20px;
            height: 20px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-top-color: #ffffff;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(40px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        @media (max-width: 640px) {
            .login-modal-container {
                max-width: 350px;
                margin: 0 15px;
            }

            .login-modal-header,
            .login-modal-form-container {
                padding: 20px;
            }

            .login-modal-form-header h2 {
                font-size: 1.4rem;
            }

            .login-modal-logo-container {
                max-width: 200px;
                height: 80px;
                margin-bottom: 20px;
            }

            .login-modal-form-group {
                margin-bottom: 16px;
            }

            .login-modal-form-group input {
                padding: 10px 12px;
                font-size: 0.9rem;
            }

            .login-modal-btn {
                padding: 12px 16px;
                font-size: 0.9rem;
            }
        }

        @media (max-width: 480px) {
            .login-modal-container {
                max-width: 320px;
            }

            .login-modal-header,
            .login-modal-form-container {
                padding: 16px;
            }

            .login-modal-form-header {
                margin-bottom: 20px;
            }

            .login-modal-form-header h2 {
                font-size: 1.3rem;
            }
        }

        /* Register Modal Styling - Based on register.html design */
        .register-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(4px);
            display: flex;
            align-items: flex-start;
            justify-content: center;
            z-index: 1001;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s cubic-bezier(0.4, 0.0, 0.2, 1);
            padding: 10px;
            overflow-y: auto;
            padding-top: 20px;
        }

        .register-modal.active {
            opacity: 1;
            visibility: visible;
        }

        .register-modal-container {
            width: 100%;
            max-width: 480px;
            background: white;
            border-radius: 16px;
            box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
            transform: translateY(30px) scale(0.9);
            transition: all 0.3s cubic-bezier(0.4, 0.0, 0.2, 1);
            position: relative;
            animation: slideUp 0.8s cubic-bezier(0.16, 1, 0.3, 1);
            max-height: calc(100vh - 40px);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .register-modal.active .register-modal-container {
            transform: translateY(0) scale(1);
        }

        .register-modal-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #f80101, #4285f4);
        }

        .register-modal-header {
            padding: 20px 40px 10px;
            text-align: center;
            position: relative;
            flex-shrink: 0;
        }

        .register-modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            background: none;
            border: none;
            font-size: 24px;
            color: #666;
            cursor: pointer;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }

        .register-modal-close:hover {
            background: rgba(0, 0, 0, 0.1);
            color: #333;
        }

        .register-modal-logo-container {
            width: 100%;
            max-width: 200px;
            height: 80px;
            margin: 0 auto 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .register-modal-logo-container img {
            width: 90%;
            height: 90%;
            object-fit: contain;
            border-radius: 16px;
        }

        .register-modal-form-container {
            padding: 20px 40px 40px;
            flex: 1;
            overflow-y: auto;
            min-height: 0;
            scrollbar-width: thin;
            scrollbar-color: #ccc #f1f1f1;
        }

        .register-modal-form-container::-webkit-scrollbar {
            width: 6px;
        }

        .register-modal-form-container::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }

        .register-modal-form-container::-webkit-scrollbar-thumb {
            background: #ccc;
            border-radius: 10px;
        }

        .register-modal-form-container::-webkit-scrollbar-thumb:hover {
            background: #aaa;
        }

        .register-modal-form-header {
            text-align: center;
            margin-bottom: 15px;
        }

        .register-modal-form-header h2 {
            font-size: 1.8rem;
            font-weight: 600;
            color: #333;
            margin-bottom: 8px;
            letter-spacing: -0.02em;
        }

        .register-modal-form-header p {
            font-size: 0.95rem;
            color: #666;
            font-weight: 400;
            line-height: 1.5;
        }

        .register-modal-form-group {
            margin-bottom: 16px;
            animation: fadeInUp 0.6s ease-out;
            animation-fill-mode: both;
        }

        .register-modal-form-group:nth-child(1) { animation-delay: 0.1s; }
        .register-modal-form-group:nth-child(2) { animation-delay: 0.2s; }
        .register-modal-form-group:nth-child(3) { animation-delay: 0.3s; }
        .register-modal-form-group:nth-child(4) { animation-delay: 0.4s; }

        .register-modal-input-group {
            position: relative;
        }

        .register-modal-input {
            width: 100%;
            padding: 14px 16px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 400;
            background: #fafafa;
            transition: all 0.3s ease;
            outline: none;
            box-sizing: border-box;
        }

        .register-modal-input::placeholder {
            color: #666;
            opacity: 0.7;
        }

        .register-modal-input:focus {
            border-color: #f80101;
            background: white;
            box-shadow: 0 0 0 3px rgba(248, 1, 1, 0.1);
        }

        .register-modal-input-icon {
            position: absolute;
            right: 16px;
            top: 50%;
            transform: translateY(-50%);
            color: #666;
            font-size: 1.1rem;
            pointer-events: none;
        }

        .register-modal-password-toggle {
            position: absolute;
            right: 16px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            cursor: pointer;
            color: #666;
            font-size: 1.1rem;
            padding: 4px;
            border-radius: 4px;
            transition: all 0.2s ease;
        }

        .register-modal-password-toggle:hover {
            color: #f80101;
            background: rgba(248, 1, 1, 0.1);
        }

        .register-modal-password-strength {
            margin-top: 12px;
            padding: 16px;
            background: linear-gradient(135deg, rgba(66, 133, 244, 0.05) 0%, rgba(248, 1, 1, 0.05) 100%);
            border-radius: 8px;
            border-left: 4px solid #4285f4;
        }

        .register-modal-strength-title {
            font-size: 14px;
            font-weight: 600;
            color: #333;
            margin-bottom: 8px;
        }

        .register-modal-strength-indicators {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 8px;
        }

        .register-modal-strength-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 13px;
            color: #666;
            transition: color 0.3s ease;
        }

        .register-modal-strength-item.valid {
            color: #28a745;
        }

        .register-modal-strength-item i {
            font-size: 12px;
            width: 12px;
        }

        .register-modal-checkbox-group {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            padding: 16px;
            background: #f5f5f5;
            border-radius: 8px;
            border: 1px solid #ddd;
            margin-bottom: 20px;
            animation: fadeInUp 0.6s ease-out 0.5s both;
        }

        .register-modal-checkbox {
            width: 20px;
            height: 20px;
            border: 2px solid #ddd;
            border-radius: 4px;
            background: white;
            cursor: pointer;
            position: relative;
            transition: all 0.3s ease;
            flex-shrink: 0;
            margin-top: 2px;
        }

        .register-modal-checkbox input {
            opacity: 0;
            position: absolute;
            width: 100%;
            height: 100%;
            cursor: pointer;
            margin: 0;
        }

        .register-modal-checkbox input:checked + .register-modal-checkmark {
            background: #f80101;
            border-color: #f80101;
            transform: scale(1.1);
        }

        .register-modal-checkbox input:checked + .register-modal-checkmark::after {
            opacity: 1;
            transform: rotate(45deg) scale(1);
        }

        .register-modal-checkmark {
            width: 100%;
            height: 100%;
            border-radius: 4px;
            transition: all 0.3s ease;
            position: relative;
        }

        .register-modal-checkmark::after {
            content: '';
            position: absolute;
            left: 6px;
            top: 2px;
            width: 6px;
            height: 10px;
            border: solid white;
            border-width: 0 2px 2px 0;
            opacity: 0;
            transform: rotate(45deg) scale(0.5);
            transition: all 0.2s ease;
        }

        .register-modal-checkbox-label {
            font-size: 14px;
            color: #666;
            line-height: 1.5;
        }

        .register-modal-checkbox-label a {
            color: #f80101;
            text-decoration: none;
            font-weight: 500;
            transition: color 0.2s ease;
        }

        .register-modal-checkbox-label a:hover {
            color: #d80000;
            text-decoration: underline;
        }

        .register-modal-btn {
            width: 100%;
            padding: 16px 24px;
            background: linear-gradient(135deg, #f80101, #d80000);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
            animation: fadeInUp 0.6s ease-out 0.6s both;
        }

        .register-modal-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .register-modal-btn:hover::before {
            left: 100%;
        }

        .register-modal-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(248, 1, 1, 0.3);
        }

        .register-modal-btn:active {
            transform: translateY(0);
        }

        .register-modal-btn:disabled {
            background: #666;
            cursor: not-allowed;
            transform: none;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .register-modal-spinner {
            width: 20px;
            height: 20px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-top: 2px solid white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        .register-modal-divider {
            text-align: center;
            margin: 20px 0;
            position: relative;
            animation: fadeInUp 0.6s ease-out 0.7s both;
        }

        .register-modal-divider::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 1px;
            background: #ddd;
            z-index: 1;
        }

        .register-modal-divider span {
            background: white;
            padding: 0 16px;
            color: #666;
            font-size: 14px;
            position: relative;
            z-index: 2;
        }

        .register-modal-login-link {
            text-align: center;
            font-size: 14px;
            color: #666;
        }

        .register-modal-login-link a {
            color: #4285f4;
            text-decoration: none;
            font-weight: 500;
            transition: color 0.2s ease;
        }

        .register-modal-login-link a:hover {
            color: #f80101;
            text-decoration: underline;
        }

        .register-modal-alert {
            padding: 16px 20px;
            border-radius: 8px;
            margin-bottom: 24px;
            font-size: 14px;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 12px;
            animation: slideDown 0.3s ease;
            border-left: 4px solid;
        }

        .register-modal-alert.success {
            background: linear-gradient(135deg, #d4edda, #c3e6cb);
            color: #28a745;
            border-left-color: #28a745;
        }

        .register-modal-alert.error {
            background: linear-gradient(135deg, #f8d7da, #f5c6cb);
            color: #dc3545;
            border-left-color: #dc3545;
        }

        .register-modal-input.error {
            border-color: #dc3545;
            background: rgba(220, 53, 69, 0.05);
        }

        @media (max-width: 640px) {
            .register-modal-container {
                max-width: 350px;
                margin: 0 15px;
            }

            .register-modal-header,
            .register-modal-form-container {
                padding: 20px;
            }

            .register-modal-form-header h2 {
                font-size: 1.6rem;
            }

            .register-modal-logo-container {
                max-width: 200px;
                height: 80px;
                margin-bottom: 20px;
            }

            .register-modal-strength-indicators {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 480px) {
            .register-modal-container {
                max-width: 320px;
            }

            .register-modal-header,
            .register-modal-form-container {
                padding: 16px;
            }

            .register-modal-form-header {
                margin-bottom: 20px;
            }

            .register-modal-form-header h2 {
                font-size: 1.4rem;
            }
        }

        /* Forgot Password Modal Styling */
        .forgot-password-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(4px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1003;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s cubic-bezier(0.4, 0.0, 0.2, 1);
            padding: 20px;
        }

        .forgot-password-modal.active {
            opacity: 1;
            visibility: visible;
        }

        .forgot-password-modal-container {
            width: 100%;
            max-width: 450px;
            background: white;
            border-radius: 16px;
            box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
            overflow: hidden;
            transform: translateY(30px) scale(0.9);
            transition: all 0.3s cubic-bezier(0.4, 0.0, 0.2, 1);
            position: relative;
            animation: slideUp 0.8s cubic-bezier(0.16, 1, 0.3, 1);
        }

        .forgot-password-modal.active .forgot-password-modal-container {
            transform: translateY(0) scale(1);
        }

        .forgot-password-modal-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #f80101, #ff5757);
        }

        .forgot-password-modal-header {
            padding: 40px 40px 20px;
            text-align: center;
            position: relative;
        }

        .forgot-password-modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            background: none;
            border: none;
            font-size: 24px;
            color: #666;
            cursor: pointer;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }

        .forgot-password-modal-close:hover {
            background: rgba(0, 0, 0, 0.1);
            color: #333;
        }

        .forgot-password-modal-icon {
            width: 80px;
            height: 80px;
            margin: 0 auto 20px;
            background: linear-gradient(135deg, #f80101, #ff5757);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 32px;
        }

        .forgot-password-modal-form-container {
            padding: 0 40px 40px;
        }

        .forgot-password-modal-form-header {
            text-align: center;
            margin-bottom: 25px;
        }

        .forgot-password-modal-form-header h2 {
            color: #333;
            font-size: 1.6rem;
            font-weight: 600;
            margin-bottom: 8px;
            letter-spacing: -0.02em;
        }

        .forgot-password-modal-form-header p {
            color: #666;
            font-size: 0.95rem;
            font-weight: 400;
            line-height: 1.5;
        }

        .forgot-password-modal-form-group {
            margin-bottom: 20px;
            position: relative;
            animation: fadeInUp 0.6s ease-out;
            animation-fill-mode: both;
        }

        .forgot-password-modal-form-group label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 500;
            font-size: 0.95rem;
        }

        .forgot-password-modal-form-group input {
            width: 100%;
            padding: 12px 14px;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-size: 0.95rem;
            font-family: inherit;
            background: #fafafa;
            transition: all 0.3s ease;
            outline: none;
            font-weight: 400;
            box-sizing: border-box;
        }

        .forgot-password-modal-form-group input::placeholder {
            color: #666;
            opacity: 0.7;
        }

        .forgot-password-modal-form-group input:focus {
            border-color: #f80101;
            background: white;
            box-shadow: 0 0 0 3px rgba(248, 1, 1, 0.1);
        }

        .forgot-password-modal-btn {
            width: 100%;
            border-radius: 6px;
            font-size: 0.95rem;
            font-weight: 600;
            padding: 14px 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            background: linear-gradient(135deg, #f80101, #d80000);
            color: white;
            border: none;
            animation: fadeInUp 0.6s ease-out 0.3s both;
        }

        .forgot-password-modal-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .forgot-password-modal-btn:hover::before {
            left: 100%;
        }

        .forgot-password-modal-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(248, 1, 1, 0.3);
        }

        .forgot-password-modal-btn:active {
            transform: translateY(0);
        }

        .forgot-password-modal-btn:disabled {
            background: #666;
            color: white;
            cursor: not-allowed;
            transform: none;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .forgot-password-modal-back-link {
            text-align: center;
            margin-top: 20px;
            color: #666;
            font-size: 0.9rem;
        }

        .forgot-password-modal-back-link a {
            color: #f80101;
            font-weight: 500;
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .forgot-password-modal-back-link a:hover {
            color: #d80000;
            text-decoration: underline;
        }

        .forgot-password-modal-spinner {
            width: 20px;
            height: 20px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-top-color: #ffffff;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        .forgot-password-modal-alert {
            padding: 16px 20px;
            border-radius: 8px;
            margin-bottom: 24px;
            font-size: 14px;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 12px;
            animation: slideDown 0.3s ease;
            border-left: 4px solid;
        }

        .forgot-password-modal-alert.success {
            background: linear-gradient(135deg, #d4edda, #c3e6cb);
            color: #28a745;
            border-left-color: #28a745;
        }

        .forgot-password-modal-alert.error {
            background: linear-gradient(135deg, #f8d7da, #f5c6cb);
            color: #dc3545;
            border-left-color: #dc3545;
        }

        @media (max-width: 640px) {
            .forgot-password-modal-container {
                max-width: 350px;
                margin: 0 15px;
            }

            .forgot-password-modal-header,
            .forgot-password-modal-form-container {
                padding: 20px;
            }

            .forgot-password-modal-form-header h2 {
                font-size: 1.4rem;
            }

            .forgot-password-modal-icon {
                width: 60px;
                height: 60px;
                font-size: 24px;
                margin-bottom: 15px;
            }

            .forgot-password-modal-form-group {
                margin-bottom: 16px;
            }

            .forgot-password-modal-form-group input {
                padding: 10px 12px;
                font-size: 0.9rem;
            }

            .forgot-password-modal-btn {
                padding: 12px 16px;
                font-size: 0.9rem;
            }
        }

        @media (max-width: 480px) {
            .forgot-password-modal-container {
                max-width: 320px;
            }

            .forgot-password-modal-header,
            .forgot-password-modal-form-container {
                padding: 16px;
            }

            .forgot-password-modal-form-header {
                margin-bottom: 20px;
            }

            .forgot-password-modal-form-header h2 {
                font-size: 1.3rem;
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-top">
            <button class="sidebar-toggle" onclick="toggleSidebar()" aria-label="Open menu"></button>
            <div class="logo">
                <a href="index.html" class="logo-link">
                    <img src="https://comparehub-smartphone-images.s3.af-south-1.amazonaws.com/IMG_20250625_174144.jpg" alt="CompareHubPrices" class="logo-image">
                </a>
            </div>
            <div class="search-container">
                <form id="search-form">
                    <input type="text" name="q" class="search-input" placeholder="Search......." id="searchInput">
                    <button type="submit" class="search-button" aria-label="Search"><i class="fas fa-search"></i></button>
                </form>
                <div class="search-suggestions" id="searchSuggestions">
                    <div class="suggestions-header">
                        <span class="all-results">All</span>
                        <span class="search-query" id="searchQuery">results</span>
                    </div>
                    <div class="suggestions-grid" id="suggestionsGrid"></div>
                </div>
            </div>
        </div>
        <nav class="category-nav">
            <a href="best-deals.html" class="active"><i class=""></i> Best deals</a>
            <a href="#new-arrivals"><i class=""></i> New Arrivals</a>
            <a href="#wishlist" id="wishlist-link"><i class="fas fa-heart"></i> Wishlist</a>
        </nav>
    </header>

    <div class="main-container">
        <nav class="sidebar" id="sidebar">
            <div class="sidebar-login" id="sidebarLogin"></div>
            <div class="sidebar-search">
                <input type="text" placeholder="Search categories..." id="sidebarSearchInput">
            </div>
            <div class="sidebar-header">
                <h3>Browse Categories</h3>
                <button class="close-sidebar" onclick="closeSidebar()" aria-label="Close menu">&times;</button>
            </div>
              <div class="menu-content">
                <ul class="menu-items">
                    <li class="item">
                        <div class="submenu-item" onclick="toggleSubmenu(this)">
                            <span><i class=""></i> Cellphones & Tablets</span>
                            <i class="fa-solid fa-chevron-right"></i>
                        </div>
                        <ul class="menu-items submenu">
                            <li class="menu-title" onclick="goBack(this)"><i class="fa-solid fa-chevron-left"></i> Cellphones & Tablets</li>
                            <li class="item"><a href="smartphones.html">Smartphones</a></li>
                            <li class="item"><a href="#tablets">Tablets</a></li>
                            <li class="item"><a href="#phone-accessories">Accessories</a></li>
                        </ul>
                    </li>

                       <li class="item">
                         <div class="submenu-item" onclick="toggleSubmenu(this)">
                             <span><i class=""></i>Laptops</span>
                             <i class="fa-solid fa-chevron-right"></i>
                         </div>
                         <ul class="menu-items submenu">
                             <li class="menu-title" onclick="goBack(this)"><i class="fa-solid fa-chevron-left"></i> Laptops & Accessories</li>
                             <li class="item"><a href="#printers">Windows Laptops</a></li>
                             <li class="item"><a href="#monitors">Chromebooks</a></li>
                             <li class="item"><a href="#keyboards-mice">Macbooks</a></li>
                             <li class="item"><a href="#storage-devices">Gaming Laptops</a></li>
                             <li class="item"><a href="#computer-speakers">Accessories</a></li>
                        
                         </ul>
                    </li>


                    <li class="item">
                         <div class="submenu-item" onclick="toggleSubmenu(this)">
                             <span><i class=""></i> Computers & Accessories</span>
                             <i class="fa-solid fa-chevron-right"></i>
                         </div>
                         <ul class="menu-items submenu">
                             <li class="menu-title" onclick="goBack(this)"><i class="fa-solid fa-chevron-left"></i> Computers & Accessories</li>
                             <li class="item"><a href="#printers">Printers</a></li>
                             <li class="item"><a href="#monitors">Monitors</a></li>
                             <li class="item"><a href="#keyboards-mice">Keyboards & Mice</a></li>
                             <li class="item"><a href="#storage-devices">Storage Devices</a></li>
                             <li class="item"><a href="#computer-speakers">Computer Speakers</a></li>
                             <li class="item"><a href="#webcams">Webcams</a></li>
                         </ul>
                    </li>
                    <li class="item">
                        <div class="submenu-item" onclick="toggleSubmenu(this)">
                            <span><i class=""></i> TV & Streaming</span>
                            <i class="fa-solid fa-chevron-right"></i>
                        </div>
                        <ul class="menu-items submenu">
                            <li class="menu-title" onclick="goBack(this)"><i class="fa-solid fa-chevron-left"></i> TV & Streaming</li>
                            <li class="item"><a href="#televisions">Televisions</a></li>
                            <li class="item"><a href="#streaming-devices">Streaming Devices</a></li>
                            <li class="item"><a href="#tv-mounts">TV Mounts</a></li>
                            <li class="item"><a href="#remote-controls">Remote Controls</a></li>
                        </ul>
                    </li>

                       <li class="item">
                         <div class="submenu-item" onclick="toggleSubmenu(this)">
                             <span><i class=""></i>Audio</span>
                             <i class="fa-solid fa-chevron-right"></i>
                         </div>
                         <ul class="menu-items submenu">
                             <li class="menu-title" onclick="goBack(this)"><i class="fa-solid fa-chevron-left"></i> Audio</li>
                             <li class="item"><a href="#printers">Soundbars</a></li>
                             <li class="item"><a href="#monitors">Earbuds</a></li>
                             <li class="item"><a href="#keyboards-mice">Headphones</a></li>
                             <li class="item"><a href="#storage-devices">Bluetooth Speakers</a></li>
                             <li class="item"><a href="#computer-speakers">Home Audio Systems</a></li>
                        
                         </ul>
                    </li>

                         <li class="item">
                         <div class="submenu-item" onclick="toggleSubmenu(this)">
                             <span><i class=""></i>Wearables Devices</span>
                             <i class="fa-solid fa-chevron-right"></i>
                         </div>
                         <ul class="menu-items submenu">
                             <li class="menu-title" onclick="goBack(this)"><i class="fa-solid fa-chevron-left"></i> Wearables Devices</li>
                             <li class="item"><a href="#printers">Smartwatches</a></li>
                             <li class="item"><a href="#monitors">Fitness Trackers</a></li>
                             <li class="item"><a href="#keyboards-mice">VR Headsets</a></li>
                            
                         </ul>
                    </li>


                         <li class="item">
                         <div class="submenu-item" onclick="toggleSubmenu(this)">
                             <span><i class=""></i>Consoles</span>
                             <i class="fa-solid fa-chevron-right"></i>
                         </div>
                         <ul class="menu-items submenu">
                             <li class="menu-title" onclick="goBack(this)"><i class="fa-solid fa-chevron-left"></i> Consoles</li>
                             <li class="item"><a href="#printers">Consoles</a></li>
                             <li class="item"><a href="#monitors">Console Accessories</a></li>
                         </ul>
                    </li>
                       <li class="item">
                         <div class="submenu-item" onclick="toggleSubmenu(this)">
                             <span><i class=""></i> Appliances</span>
                             <i class="fa-solid fa-chevron-right"></i>
                         </div>
                         <ul class="menu-items submenu">
                             <li class="menu-title" onclick="goBack(this)"><i class="fa-solid fa-chevron-left"></i> Appliances</li>
                             <li class="item">
                                 <div class="submenu-item" onclick="toggleSubmenu(this)">
                                     <span>Kitchen Appliances</span>
                                     <i class="fa-solid fa-chevron-right"></i>
                                 </div>
                                 <ul class="menu-items submenu">
                                     <li class="menu-title" onclick="goBack(this)"><i class="fa-solid fa-chevron-left"></i> Kitchen Appliances</li>
                                     <li class="item"><a href="#refrigerators">Refrigerators</a></li>
                                     <li class="item"><a href="#microwaves">Microwaves</a></li>
                                     <li class="item"><a href="#coffee-machines">Coffee Machines</a></li>
                                     <li class="item"><a href="#blenders">Blenders</a></li>
                                 </ul>
                             </li>
                             <li class="item"><a href="#vacuum-cleaners">Vacuum Cleaners</a></li>
                             <li class="item"><a href="#air-conditioners">Air Conditioners</a></li>
                         </ul>
                    </li>
                </ul>
            </div>
            <div class="sidebar-footer">
                <div class="cookie-notice">
                    <p>This website uses cookies to provide you with the best experience.</p>
                    <button class="accept-cookies" onclick="acceptCookies()">Accept</button>
                </div>
            </div>
        </nav>
        <main class="content">
            <section class="hero-carousel">
                <div class="hero-slides">
                    <div class="hero-slide active">
                        <a href="https://www.takealot.com/black-friday" target="_blank" class="hero-slide-link">
                            <picture>
                                <source media="(max-width: 480px)" srcset="https://consumer.huawei.com/dam/content/dam/huawei-cbg-site/ecommerce/za/2025/June/MEGA/WAP-1080x1152.webp">
                                <source media="(max-width: 768px)" srcset="https://consumer.huawei.com/dam/content/dam/huawei-cbg-site/ecommerce/za/2025/June/MEGA/WAP-1080x1152.webp">
                                <img src="https://consumer.huawei.com/dam/content/dam/huawei-cbg-site/ecommerce/za/2025/June/MEGA/WEB--3840x1136.webp" alt="Black Friday Deals" class="hero-image">
                            </picture>
                        </a>
                    </div>
                    <div class="hero-slide">
                        <a href="https://www.amazon.com/prime-day" target="_blank" class="hero-slide-link">
                            <picture>
                                <source media="(max-width: 480px)" srcset="https://hisense.co.za/wp-content/uploads/2025/05/100KV_1920x800-1024x427.jpg">
                                <source media="(max-width: 768px)" srcset="https://www.asus.com/WebsitesBanner/ZA/banners/store/acizy7bp3pbajipj/acizy7bp3pbajipj-0_0_tablet_0_1X.jpg?webp">
                                <img src="https://www.defy.co.za/content/dam/defy/za/images-defy-homepage/desktop/Defy_Homepage_Desktop-Blog-Article-Hero-1.png/jcr:content/renditions/original" alt="Prime Day Deals" class="hero-image">
                            </picture>
                        </a>
                    </div>
                    <div class="hero-slide">
                         <a href="https://www.takealot.com/tech-deals" target="_blank" class="hero-slide-link">
                             <picture>
                                 <source media="(max-width: 480px)" srcset="https://www.asus.com/WebsitesBanner/ZA/banners/store/acizy7bp3pbajipj/acizy7bp3pbajipj-0_0_mobile_0_1X.jpg?webp">
                                 <source media="(max-width: 768px)" srcset="https://www.asus.com/WebsitesBanner/ZA/banners/store/acizy7bp3pbajipj/acizy7bp3pbajipj-0_0_tablet_0_1X.jpg?webp">
                                 <img src="https://www.asus.com/WebsitesBanner/ZA/banners/store/acizy7bp3pbajipj/acizy7bp3pbajipj-0_0_desktop_0_1X.jpg?webp" alt="Tech Deals" class="hero-image">
                             </picture>
                         </a>
                    </div>
                    <div class="hero-slide">
                         <a href="https://www.amazon.com/home-appliances" target="_blank" class="hero-slide-link">
                             <picture>
                                 <source media="(max-width: 480px)" srcset="https://www.asus.com/WebsitesBanner/ZA/banners/store/mh69pfka5ufjjdyj/mh69pfka5ufjjdyj-0_0_mobile_0_1X.jpg">
                                 <source media="(max-width: 768px)" srcset="https://www.asus.com/WebsitesBanner/ZA/banners/store/mh69pfka5ufjjdyj/mh69pfka5ufjjdyj-0_0_tablet_0_1X.jpg">
                                 <img src="https://www.asus.com/WebsitesBanner/ZA/banners/store/mh69pfka5ufjjdyj/mh69pfka5ufjjdyj-0_0_desktop_0_1X.jpg" alt="Home Appliances Sale" class="hero-image">
                             </picture>
                         </a>
                    </div>
                </div>
                <div class="hero-indicators">
                    <span class="hero-indicator active" data-slide="0"></span>
                    <span class="hero-indicator" data-slide="1"></span>
                    <span class="hero-indicator" data-slide="2"></span>
                    <span class="hero-indicator" data-slide="3"></span>
                </div>
            </section>
            <section class="deals-section">
                <div class="section-header">
                    <h2 class="section-title"> Today's Best Deals On Store A</h2>
                </div>
                <div class="products-carousel" id="takealotCarousel">
                    <div class="products-slider" id="takealotSlider"></div>
                </div>
                <div class="carousel-indicators" id="takealotIndicators"></div>
            </section>
            <section class="deals-section">
                <div class="section-header">
                    <h2 class="section-title">Today's Best Deals On Store B</h2>
                </div>
                <div class="products-carousel" id="amazonCarousel">
                    <div class="products-slider" id="amazonSlider"></div>
                </div>
                <div class="carousel-indicators" id="amazonIndicators"></div>
            </section>
        </main>
    </div>

    <div class="sidebar-overlay" id="sidebarOverlay" onclick="closeSidebar()"></div>
    
    <!-- Notification Container -->
    <div class="notification-container" id="notificationContainer"></div>
<!-- Mobile Search Modal -->
    <div class="mobile-search-modal" id="mobileSearchModal">
        <div class="mobile-search-modal-header">
            <span class="mobile-search-close" id="mobileSearchClose">&times;</span>
            <form class="mobile-search-form" id="mobileSearchForm">
                <input type="text" class="mobile-search-input" id="mobileSearchInput" placeholder="Search...">
                <button type="submit" class="mobile-search-button"><i class="fas fa-search"></i></button>
            </form>
        </div>
        <div class="mobile-search-suggestions" id="mobileSearchSuggestions">
            <div class="mobile-suggestions-header">
                <span class="mobile-all-results">All</span>
                <span class="mobile-search-query" id="mobileSearchQuery">results</span>
            </div>
            <div class="mobile-suggestions-grid" id="mobileSuggestionsGrid"></div>
        </div>
    </div>
    
    <!-- Wishlist Modal -->
    <div id="wishlist-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-actions">
                    <a href="profile.html#wishlist" class="view-all-btn">View All</a>
                    <button class="remove-all-btn" id="clear-wishlist-btn">Remove All</button>
                    <span class="wishlist-close-modal" id="close-wishlist-modal">&times;</span>
                </div>
            </div>
            <div class="modal-body">
                <div id="wishlist-items" class="wishlist-grid">
                    <!-- Wishlist items will be populated here -->
                </div>
                <div id="modal-empty-wishlist" class="empty-wishlist" style="display: none;">
                    <i class="far fa-heart"></i>
                    <p>Your wishlist is empty</p>
                    <p class="empty-wishlist-subtext">Add items to your wishlist by clicking the heart icon on products</p>
                    <a href="smartphones.html" class="browse-products-btn">Browse Products</a>
                </div>
            </div>
        </div>
    </div>
    

    <footer class="footer">
        <div class="footer-content">
            <div class="footer-section">
                <h3>About CompareHubPrices</h3>
                <ul>
                    <li><a href="about-us.html">About Us</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>Help & Support</h3>
                <ul>
                    <li><a href="#contact">Contact Us</a></li>
                    <li><a href="FAQs.html">FAQs</a></li>
                    <li><a href="privacy-policy.html">Privacy Policy</a></li>
                    <li><a href="Terms-of-Service.html">Terms of Service</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>Connect With Us</h3>
                <div class="social-icons">
                    <a href="#" aria-label="Facebook"><i class="fab fa-facebook"></i></a>
                    <a href="#" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
                    <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                </div>
                <div class="newsletter-section">
                    <h4>Get the Best Deals in Your Inbox</h4>
                    <form class="newsletter-form" onsubmit="subscribeNewsletter(event)">
                        <input type="email" placeholder="Enter your email address" required aria-label="Email address for newsletter">
                        <button type="submit"><i class="fas fa-paper-plane"></i> Subscribe</button>
                    </form>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2025 CompareHub Prices. All rights reserved.</p>
        </div>
    </footer>

<script>
// index.js

document.addEventListener('DOMContentLoaded', async function() {
    // Dynamic body padding for fixed header
    function setBodyPadding() {
        const header = document.querySelector('.header');
        if (header) {
            const headerHeight = header.offsetHeight;
            document.body.style.paddingTop = `${headerHeight}px`;
        }
    }
    setBodyPadding();
    window.addEventListener('resize', setBodyPadding);

    // ---------- NOTIFICATION SYSTEM ----------
    function showNotification(message, type = 'success', title = '') {
        const notificationContainer = document.getElementById('notificationContainer');
        
        // Create notification elements
        const notification = document.createElement('div');
        notification.className = `notification ${type}`;
        
        const content = document.createElement('div');
        content.className = 'notification-content';
        
        const icon = document.createElement('div');
        icon.className = 'notification-icon';
        icon.innerHTML = type === 'success' ? '<i class="fas fa-check-circle"></i>' : '<i class="fas fa-exclamation-circle"></i>';
        
        const messageEl = document.createElement('div');
        messageEl.className = 'notification-message';
        
        if (title) {
            const titleEl = document.createElement('div');
            titleEl.className = 'notification-title';
            titleEl.textContent = title;
            messageEl.appendChild(titleEl);
        }
        
        const messageText = document.createElement('div');
        messageText.textContent = message;
        messageEl.appendChild(messageText);
        
        const closeBtn = document.createElement('button');
        closeBtn.className = 'notification-close';
        closeBtn.innerHTML = '&times;';
        closeBtn.addEventListener('click', () => {
            notification.style.animation = 'fade-out 0.3s forwards';
            setTimeout(() => {
                notification.remove();
            }, 300);
        });
        
        content.appendChild(icon);
        content.appendChild(messageEl);
        content.appendChild(closeBtn);
        
        const progress = document.createElement('div');
        progress.className = 'notification-progress';
        
        const progressBar = document.createElement('div');
        progressBar.className = 'notification-progress-bar';
        
        progress.appendChild(progressBar);
        
        notification.appendChild(content);
        notification.appendChild(progress);
        
        notificationContainer.appendChild(notification);
        
        // Auto-remove after animation completes
        setTimeout(() => {
            notification.style.animation = 'fade-out 0.3s forwards';
            setTimeout(() => {
                notification.remove();
            }, 300);
        }, 3000);
        
        return notification;
    }

    // ---------- WISHLIST MODAL ----------
    function showWishlistModal() {
        const modal = document.getElementById('wishlist-modal');
        modal.style.display = 'block';
        document.body.style.overflow = 'hidden'; // Prevent scrolling behind modal
        // Use setTimeout to ensure the display change takes effect before adding the visible class
        setTimeout(() => {
            modal.classList.add('visible');
        }, 10);
    }

    function hideWishlistModal() {
        const modal = document.getElementById('wishlist-modal');
        modal.classList.remove('visible');
        // Wait for the transition to complete before hiding the modal
        setTimeout(() => {
            modal.style.display = 'none';
            document.body.style.overflow = ''; // Restore scrolling
        }, 300);
    }

    // Set up wishlist modal event listeners
    const wishlistLink = document.getElementById('wishlist-link');
    if (wishlistLink) {
        wishlistLink.addEventListener('click', function(e) {
            e.preventDefault();
            showWishlistModal();
        });
    }
    
    const closeModalBtn = document.querySelector('.wishlist-close-modal');
    if (closeModalBtn) {
        closeModalBtn.addEventListener('click', hideWishlistModal);
    }
    
    // Close modal when clicking outside of it (on the overlay)
    const wishlistModal = document.getElementById('wishlist-modal');
    if (wishlistModal) {
        wishlistModal.addEventListener('click', function(e) {
            if (e.target === this) {
                hideWishlistModal();
            }
        });
    }
    
    // Make "View All" button in modal work
    const viewAllBtn = document.querySelector('.view-all-btn');
    if (viewAllBtn) {
        viewAllBtn.addEventListener('click', function(e) {
            hideWishlistModal();
        });
    }

    const API_URL = 'https://xf9zlapr5e.execute-api.af-south-1.amazonaws.com/deals';

    // ---------- USER INFO HELPERS (Handles Cognito and Google users) ----------
    function getAttribute(userInfo, attrName) {
        // Cognito user: Attributes/UserAttributes array
        const attrs = userInfo.Attributes || userInfo.UserAttributes || [];
        if (Array.isArray(attrs)) {
            const found = attrs.find(attr => attr.Name === attrName);
            if (found) return found.Value;
        }
        // Google user: direct property
        if (userInfo[attrName]) return userInfo[attrName];
        // Support your custom Google shape
        if (attrName === 'picture' && userInfo.avatar) return userInfo.avatar;
        if (attrName === 'picture' && userInfo.picture) return userInfo.picture;
        return '';
    }

    function getDisplayName(userInfo) {
        if (userInfo.name) return userInfo.name;
        if (userInfo.displayName) return userInfo.displayName;
        if (userInfo.email) return userInfo.email.split('@')[0].replace(/[.\-_]/g, ' ').replace(/(^|\s)\S/g, l => l.toUpperCase());
        return userInfo.userId || userInfo.Username || '';
    }

    function getAvatarInitials(userInfo) {
        if (userInfo.avatar || userInfo.picture) return ""; // Show avatar photo if available
        const displayName = getDisplayName(userInfo);
        if (displayName) {
            const parts = displayName.split(' ');
            if (parts.length >= 2) return (parts[0][0] + parts[1][0]).toUpperCase();
            return displayName[0].toUpperCase();
        }
        return 'U';
    }

    async function fetchUserInfoFromAPI(token) {
        try {
            const resp = await fetch("https://w1yg1wc8cf.execute-api.af-south-1.amazonaws.com/prod/userinfo", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                    "Authorization": `Bearer ${token}`
                }
            });
            if (!resp.ok) throw new Error("Failed to fetch user info from API");
            const data = await resp.json();
            if (data && data.user) {
                localStorage.setItem('userInfo', JSON.stringify(data.user));
                return data.user;
            }
        } catch (e) {
            console.warn("API userinfo fetch failed:", e);
        }
        return null;
    }

    // ---------- SIDEBAR LOGIN ----------
    async function renderSidebarLogin() {
        const sidebarLogin = document.getElementById('sidebarLogin');
        let userInfo = null;
        let authToken = localStorage.getItem('authToken');
        try {
            userInfo = JSON.parse(localStorage.getItem('userInfo'));
        } catch (err) { userInfo = null; }

        // Accept Google users with userInfo but no authToken
        if (!userInfo) {
            sidebarLogin.innerHTML = `
                <a href="login.html" class="login-btn">
                    <i class="fas fa-sign-in-alt"></i>Login to CompareHub
                </a>
            `;
            return;
        }

        const name = getDisplayName(userInfo);
        const email = getAttribute(userInfo, 'email');
        const avatar = getAttribute(userInfo, 'picture');
        const initials = getAvatarInitials(userInfo);

        sidebarLogin.innerHTML = `
            <div class="user-greeting fade-in">
                <div class="user-avatar" style="cursor:pointer;">
                    ${avatar ? `<img src="${avatar}" alt="Avatar">` : initials}
                </div>
                <div class="user-info">
                    <div class="user-name">${name}</div>
                    <div class="user-email">${email || ''}</div>
                    <span class="sign-out" style="cursor:pointer;">Sign Out</span>
                </div>
            </div>
        `;
        const avatarEl = sidebarLogin.querySelector('.user-avatar');
        if (avatarEl) avatarEl.addEventListener('click', function(event) {
            event.preventDefault();
            event.stopPropagation();
            window.location.href = "profile.html";
        });
        const signOutEl = sidebarLogin.querySelector('.sign-out');
        if (signOutEl) signOutEl.addEventListener('click', function(event) {
            event.preventDefault();
            event.stopPropagation();
            localStorage.removeItem('authToken');
            localStorage.removeItem('userInfo');
            window.location.href = "index.html";
        });
    }

    // ---------- HERO CAROUSEL ----------
    const heroCarousel = document.querySelector('.hero-carousel');
    if (heroCarousel) {
        const heroSlides = heroCarousel.querySelectorAll('.hero-slide');
        const heroIndicators = heroCarousel.querySelectorAll('.hero-indicator');
        let currentIndex = 0;
        let interval;
        let touchStartX = 0;
        const slideDuration = 10000;

        function showSlide(index) {
            heroSlides.forEach((slide, i) => {
                slide.classList.toggle('active', i === index);
            });
            heroIndicators.forEach((indicator, i) => {
                indicator.classList.toggle('active', i === index);
            });
            currentIndex = index;
        }

        function nextSlide() {
            showSlide((currentIndex + 1) % heroSlides.length);
        }

        function prevSlide() {
            showSlide((currentIndex - 1 + heroSlides.length) % heroSlides.length);
        }

        function startCarousel() {
            stopCarousel();
            interval = setInterval(nextSlide, slideDuration);
        }

        function stopCarousel() {
            clearInterval(interval);
        }

        if (heroSlides.length > 0) {
            showSlide(0);
            startCarousel();

            heroIndicators.forEach((indicator, index) => {
                indicator.addEventListener('click', () => {
                    stopCarousel();
                    showSlide(index);
                    startCarousel();
                });
            });

            const handleTouchStart = (e) => {
                touchStartX = e.touches[0].clientX;
                stopCarousel();
            };

            const handleTouchEnd = (e) => {
                const touchEndX = e.changedTouches[0].clientX;
                const diff = touchEndX - touchStartX;
                if (Math.abs(diff) > 50) {
                    if (diff > 0) prevSlide();
                    else nextSlide();
                }
                startCarousel();
            };

            heroCarousel.addEventListener('touchstart', handleTouchStart);
            heroCarousel.addEventListener('touchend', handleTouchEnd);
            heroCarousel.addEventListener('mouseenter', stopCarousel);
            heroCarousel.addEventListener('mouseleave', startCarousel);

            document.addEventListener('keydown', (e) => {
                if (e.key === 'ArrowRight') nextSlide();
                else if (e.key === 'ArrowLeft') prevSlide();
            });
        }
    }

    // ---------- FETCH DEALS DATA ----------
    async function fetchDealsData() {
        try {
            showLoadingState();
            const response = await fetch(API_URL, {
                method: 'GET',
                headers: {'Content-Type': 'application/json'},
            });
            if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
            const data = await response.json();
            processDealsData(data);
            hideLoadingState();
        } catch (error) {
            showErrorState(error.message);
        }
    }

    function processDealsData(data) {
        // Store A
        if (data.takealot && Array.isArray(data.takealot)) {
            const takealotSlides = createSlidesFromProducts(data.takealot, 5);
            initializeProductCarousel('takealot', takealotSlides);
        } else if (data.takealot && data.takealot.slides) {
            initializeProductCarousel('takealot', data.takealot.slides);
        }
        // Store B
        if (data.amazon && Array.isArray(data.amazon)) {
            const amazonSlides = createSlidesFromProducts(data.amazon, 5);
            initializeProductCarousel('amazon', amazonSlides);
        } else if (data.amazon && data.amazon.slides) {
            initializeProductCarousel('amazon', data.amazon.slides);
        }
    }

    function createSlidesFromProducts(products, productsPerSlide) {
        const slides = [];
        for (let i = 0; i < products.length; i += productsPerSlide) {
            slides.push(products.slice(i, i + productsPerSlide));
        }
        return slides;
    }

    function showLoadingState() {
        const takealotSlider = document.getElementById('takealotSlider');
        const amazonSlider = document.getElementById('amazonSlider');
        const loadingHTML = `
            <div class="loading-state">
                <div class="spinner-container">
                    <div class="spinner"></div>
                    <p>Loading deals...</p>
                </div>
            </div>
        `;
        if (takealotSlider) {
            takealotSlider.innerHTML = loadingHTML.replace('Loading deals...', 'Loading Store A deals...');
        }
        if (amazonSlider) {
            amazonSlider.innerHTML = loadingHTML.replace('Loading deals...', 'Loading Store B deals...');
        }
    }

    function hideLoadingState() {
        const loadingStates = document.querySelectorAll('.loading-state');
        loadingStates.forEach(state => state.remove());
    }

    function showErrorState(errorMessage) {
        const takealotSlider = document.getElementById('takealotSlider');
        const amazonSlider = document.getElementById('amazonSlider');
        const errorHTML = `
            <div class="error-state">
                <h3>Failed to load deals</h3>
                <p>${errorMessage}</p>
                <button onclick="window.location.reload()" class="retry-btn">Retry</button>
            </div>
        `;
        if (takealotSlider) takealotSlider.innerHTML = errorHTML;
        if (amazonSlider) amazonSlider.innerHTML = errorHTML;
    }

    // ---------- PRODUCT CARD ----------
    function createProductCard(product) {
        const imageUrl = product.img || product.imageUrl || product.image || '';
        const productName = product.name || product.model || product.title || 'Product';
        const currentPrice = product.currentPrice || product.price || 'N/A';
        const originalPrice = product.originalPrice || '';
        const discount = product.discount || '';
        const productUrl = product.url || product.link || '#';
        return `
            <div class="product-card">
                <div class="product-link">
                    <div class="product-image">
                        <img src="${imageUrl}" alt="${productName}" loading="lazy"
                             onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjBmMGYwIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPk5vIEltYWdlPC90ZXh0Pjwvc3ZnPg=='">
                    </div>
                    <div class="product-info">
                        <h3 class="product-name">${productName}</h3>
                        <div class="price-container">
                            ${originalPrice ? `<span class="original-price">${originalPrice}</span>` : ''}
                            <span class="current-price">${currentPrice}</span>
                            ${discount ? `<span class="discount">${discount}</span>` : ''}
                        </div>
                        <a href="${productUrl}" target="_blank" class="view-deal-btn">View Deal</a>
                    </div>
                </div>
            </div>
        `;
    }

    function initializeProductCarousel(store, slidesData) {
        const slider = document.getElementById(`${store}Slider`);
        const indicatorsContainer = document.getElementById(`${store}Indicators`);
        if (!slider || !slidesData || slidesData.length === 0) return;
        slider.innerHTML = '';
        if (indicatorsContainer) indicatorsContainer.innerHTML = '';
        slidesData.forEach((slideProducts, slideIndex) => {
            const slide = document.createElement('div');
            slide.className = 'slide';
            if (slideIndex === 0) slide.classList.add('active');
            slide.innerHTML = slideProducts.map(createProductCard).join('');
            slider.appendChild(slide);
            if (indicatorsContainer) {
                const indicator = document.createElement('span');
                indicator.className = 'indicator';
                if (slideIndex === 0) indicator.classList.add('active');
                indicator.addEventListener('click', () => showProductSlide(store, slideIndex));
                indicatorsContainer.appendChild(indicator);
            }
        });
        setupProductCarousel(store, slidesData.length);
    }

    function showProductSlide(store, index) {
        const slider = document.getElementById(`${store}Slider`);
        const indicatorsContainer = document.getElementById(`${store}Indicators`);
        const slides = slider.querySelectorAll('.slide');
        const indicators = indicatorsContainer ? indicatorsContainer.querySelectorAll('.indicator') : [];

        slides.forEach(slide => slide.classList.remove('active'));
        indicators.forEach(indicator => indicator.classList.remove('active'));

        if (slides[index]) slides[index].classList.add('active');
        if (indicators[index]) indicators[index].classList.add('active');
    }

    function setupProductCarousel(store, totalSlides) {
        const slider = document.getElementById(`${store}Slider`);
        if (!slider) return;
        
        let currentIndex = 0;
        let interval;
        
        function updateSlide(newIndex) {
            showProductSlide(store, newIndex);
            currentIndex = newIndex;
        }
        
        function nextSlide() {
            const nextIndex = (currentIndex + 1) % totalSlides;
            updateSlide(nextIndex);
        }

        function prevSlide() {
            const prevIndex = (currentIndex - 1 + totalSlides) % totalSlides;
            updateSlide(prevIndex);
        }

        function startCarousel() {
            stopCarousel();
            if (totalSlides > 1) {
                interval = setInterval(nextSlide, 14000);
            }
        }
        
        function stopCarousel() {
            clearInterval(interval);
        }
        
        updateSlide(0);
        startCarousel();

        let touchStartX = 0;
        slider.addEventListener('touchstart', (e) => {
            touchStartX = e.touches[0].clientX;
            stopCarousel();
        });
        slider.addEventListener('touchend', (e) => {
            const touchEndX = e.changedTouches[0].clientX;
            const diff = touchEndX - touchStartX;
            if (Math.abs(diff) > 50) {
                if (diff > 0) prevSlide();
                else nextSlide();
            }
            startCarousel();
        });

        slider.addEventListener('mouseenter', stopCarousel);
        slider.addEventListener('mouseleave', startCarousel);
    }

    // Search functionality moved to search-suggestions.js

    // ---------- SIDEBAR ----------
    window.toggleSidebar = function() {
        const sidebar = document.getElementById('sidebar');
        const overlay = document.getElementById('sidebarOverlay');
        sidebar.classList.toggle('active');
        overlay.classList.toggle('active');
    };

    window.closeSidebar = function() {
        const sidebar = document.getElementById('sidebar');
        const overlay = document.getElementById('sidebarOverlay');
        sidebar.classList.remove('active');
        overlay.classList.remove('active');
    };

    window.toggleSubmenu = function(element) {
        const item = element.parentElement;
        const isActive = item.classList.contains('active');
        document.querySelectorAll('.item.active').forEach(activeItem => {
            if (activeItem !== item) activeItem.classList.remove('active');
        });
        item.classList.toggle('active');
        if (!isActive) {
            const submenuItems = item.querySelectorAll('.submenu .item');
            submenuItems.forEach((submenuItem, index) => {
                setTimeout(() => {
                    submenuItem.classList.add('slide-in');
                }, index * 50);
            });
        }
    };

    window.goBack = function(element) {
        const item = element.closest('.item');
        item.classList.remove('active');
    };

    document.getElementById('sidebarSearchInput').addEventListener('input', function(e) {
        const searchTerm = e.target.value.toLowerCase();
        const menuItems = document.querySelectorAll('.menu-items .item');
        menuItems.forEach(item => {
            const text = item.textContent.toLowerCase();
            if (text.includes(searchTerm)) {
                item.style.display = 'block';
            } else {
                item.style.display = 'none';
            }
        });
    });

    await renderSidebarLogin();

    document.addEventListener('click', function(e) {
        const sidebar = document.getElementById('sidebar');
        const toggle = document.querySelector('.sidebar-toggle');
        const overlay = document.getElementById('sidebarOverlay');
        if (sidebar && !sidebar.contains(e.target) && e.target !== toggle && e.target !== overlay) {
            closeSidebar();
        }
    });

    window.acceptCookies = function() {
        const cookieNotice = document.querySelector('.cookie-notice');
        if (cookieNotice) cookieNotice.style.display = 'none';
    };

    window.subscribeNewsletter = function(event) {
        event.preventDefault();
        const input = event.target.querySelector('input[type="email"]');
        if (input && input.value) {
            showNotification('Thank you for subscribing!', 'success', 'Newsletter');
            input.value = '';
        }
    };

    fetchDealsData();
});
</script>

<!-- Search suggestions functionality -->
<script src="search-suggestions.js"></script>

<!-- Account authentication functionality -->
<script src="account-authentication.js"></script>

<!-- Wishlist modal functionality -->
<script src="wishlistmodal.js"></script>

<!-- Mobile Search Modal Script -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
      // Mobile search modal functionality
      const searchInput = document.getElementById('searchInput');
      const searchButton = document.querySelector('.search-button');
      const mobileSearchModal = document.getElementById('mobileSearchModal');
      const mobileSearchClose = document.getElementById('mobileSearchClose');
      const mobileSearchInput = document.getElementById('mobileSearchInput');
      const mobileSearchForm = document.getElementById('mobileSearchForm');
      const mobileSearchQuery = document.getElementById('mobileSearchQuery');
      const mobileSuggestionsGrid = document.getElementById('mobileSuggestionsGrid');
      
      // Function to check if device is a mobile phone (not tablet)
      function isMobilePhone() {
          return window.innerWidth <= 768 &&
                (typeof window.orientation !== 'undefined' ||
                 navigator.userAgent.indexOf('IEMobile') !== -1 ||
                 /Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent));
      }
      
      // Function to open mobile search modal
      function openMobileSearchModal() {
          if (isMobilePhone()) {
              mobileSearchModal.classList.add('active');
              mobileSearchInput.focus();
              // Copy value from main search input if it exists
              if (searchInput && searchInput.value) {
                  mobileSearchInput.value = searchInput.value;
                  // Trigger input event to show suggestions
                  const inputEvent = new Event('input', { bubbles: true });
                  mobileSearchInput.dispatchEvent(inputEvent);
              }
          }
      }
      
      // Function to close mobile search modal
      function closeMobileSearchModal() {
          mobileSearchModal.classList.remove('active');
      }
      
      // Event listeners for opening modal
      if (searchInput) {
          searchInput.addEventListener('click', function(e) {
              if (isMobilePhone()) {
                  e.preventDefault();
                  e.stopPropagation();
                  openMobileSearchModal();
              }
          }, { capture: true });
      }
      
      if (searchButton) {
          searchButton.addEventListener('click', function(e) {
              if (isMobilePhone()) {
                  e.preventDefault();
                  e.stopPropagation();
                  openMobileSearchModal();
              }
          }, { capture: true });
      }
      
      // Event listener for closing modal
      if (mobileSearchClose) {
          mobileSearchClose.addEventListener('click', closeMobileSearchModal);
      }
      
      // Handle mobile search form submission
      if (mobileSearchForm) {
          mobileSearchForm.addEventListener('submit', function(e) {
              e.preventDefault();
              const query = mobileSearchInput.value.trim();
              if (query) {
                  window.location.href = `search-results.html?q=${encodeURIComponent(query)}`;
              }
          });
      }
      
      // Mobile search suggestions functionality
      if (mobileSearchInput) {
          const API_URL = 'https://xf9zlapr5e.execute-api.af-south-1.amazonaws.com/search';
          let debounceTimer;
          
          mobileSearchInput.addEventListener('input', function() {
              const query = this.value.trim();
              mobileSearchQuery.textContent = query || 'results';
              
              clearTimeout(debounceTimer);
              debounceTimer = setTimeout(async function() {
                  if (query.length < 2) {
                      mobileSuggestionsGrid.innerHTML = '';
                      return;
                  }
                  
                  try {
                      const response = await fetch(`${API_URL}?q=${encodeURIComponent(query)}&limit=10`);
                      if (!response.ok) throw new Error('API request failed');
                      
                      const data = await response.json();
                      const suggestions = data.results || [];
                      
                      mobileSuggestionsGrid.innerHTML = '';
                      
                      if (suggestions.length === 0) {
                          mobileSuggestionsGrid.innerHTML = '<div class="mobile-no-suggestions">No suggestions found</div>';
                          return;
                      }
                      
                      suggestions.forEach(item => {
                          const isCategory = item.type === 'category';
                          const suggestionElement = document.createElement('div');
                          suggestionElement.className = `mobile-suggestion-item ${isCategory ? 'category' : 'product'}`;
                          
                          if (!isCategory) {
                              const productName = item.name || item.model || item.title || '';
                              suggestionElement.innerHTML = `
                                  <a href="search-results.html?q=${encodeURIComponent(productName)}" class="mobile-suggestion-link">
                                      <div class="mobile-suggestion-img">
                                          <img src="${item.imageUrl || item.image || 'images/phones/Apple iPhone 16.webp'}" alt="${productName}">
                                      </div>
                                      <div class="mobile-suggestion-name">${productName}</div>
                                  </a>
                              `;
                          } else {
                              suggestionElement.innerHTML = `
                                  <a href="${(item.category || item.name).toLowerCase()}.html" class="mobile-suggestion-link">
                                      <div class="mobile-suggestion-icon">
                                          <i class="fas fa-folder"></i>
                                      </div>
                                      <div class="mobile-suggestion-name">${item.name || ''}</div>
                                  </a>
                              `;
                          }
                          
                          mobileSuggestionsGrid.appendChild(suggestionElement);
                      });
                  } catch (error) {
                      console.error('Error fetching suggestions:', error);
                      mobileSuggestionsGrid.innerHTML = '<div class="mobile-no-suggestions">Error loading suggestions</div>';
                  }
              }, 300); // Debounce delay
          });
      }
  });
</script>

<!-- Login Modal JavaScript -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    const loginModal = document.getElementById('loginModal');
    const loginModalClose = document.getElementById('loginModalClose');
    const loginModalForm = document.getElementById('loginModalForm');
    const loginModalBtn = document.getElementById('loginModalBtn');
    const loginModalBtnText = document.getElementById('loginModalBtnText');
    const loginModalSpinner = document.getElementById('loginModalSpinner');
    const loginModalPasswordToggle = document.getElementById('loginModalPasswordToggle');
    const loginModalPassword = document.getElementById('loginModalPassword');
    const loginModalForgotPassword = document.getElementById('loginModalForgotPassword');
    const loginModalRegisterLink = document.getElementById('loginModalRegisterLink');

    // Show login modal function
    function showLoginModal() {
        loginModal.classList.add('active');
        document.body.style.overflow = 'hidden';
    }

    // Hide login modal function
    function hideLoginModal() {
        loginModal.classList.remove('active');
        document.body.style.overflow = '';
    }

    // Update sidebar login button to show modal instead of redirecting
    function updateSidebarLoginButton() {
        const sidebarLogin = document.getElementById('sidebarLogin');
        if (sidebarLogin) {
            const loginBtn = sidebarLogin.querySelector('.login-btn');
            if (loginBtn) {
                loginBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    showLoginModal();
                });
            }
        }
    }

    // Close modal event listeners
    if (loginModalClose) {
        loginModalClose.addEventListener('click', hideLoginModal);
    }

    // Close modal when clicking outside
    loginModal.addEventListener('click', function(e) {
        if (e.target === loginModal) {
            hideLoginModal();
        }
    });

    // Close modal with Escape key
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape' && loginModal.classList.contains('active')) {
            hideLoginModal();
        }
    });

    // Password toggle functionality
    if (loginModalPasswordToggle && loginModalPassword) {
        loginModalPasswordToggle.addEventListener('click', function() {
            const type = loginModalPassword.getAttribute('type') === 'password' ? 'text' : 'password';
            loginModalPassword.setAttribute('type', type);
            const icon = loginModalPasswordToggle.querySelector('i');
            if (icon) {
                icon.className = 'fas fa-eye';
            }
        });
    }

    // Form submission
    if (loginModalForm) {
        loginModalForm.addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const email = document.getElementById('loginModalEmail').value;
            const password = document.getElementById('loginModalPassword').value;
            
            // Show loading state
            loginModalBtn.disabled = true;
            loginModalBtnText.style.display = 'none';
            loginModalSpinner.style.display = 'block';
            
            try {
                // Simulate login process (replace with actual login logic)
                await new Promise(resolve => setTimeout(resolve, 2000));
                
                // For demo purposes, just redirect to login.html
                // In a real implementation, you would handle the login here
                window.location.href = 'login.html';
                
            } catch (error) {
                console.error('Login error:', error);
                alert('Login failed. Please try again.');
            } finally {
                // Reset button state
                loginModalBtn.disabled = false;
                loginModalBtnText.style.display = 'block';
                loginModalSpinner.style.display = 'none';
            }
        });
    }

    // Forgot password link
    if (loginModalForgotPassword) {
        loginModalForgotPassword.addEventListener('click', function(e) {
            e.preventDefault();
            // Close login modal and open forgot password modal
            hideLoginModal();
            if (window.openForgotPasswordModal) {
                window.openForgotPasswordModal();
            }
        });
    }

    // Register link
    if (loginModalRegisterLink) {
        loginModalRegisterLink.addEventListener('click', function(e) {
            e.preventDefault();
            // Handle register functionality - show register modal
            hideLoginModal();
            if (window.showRegisterModal) {
                window.showRegisterModal();
            }
        });
    }

    // Update sidebar login button after DOM is loaded
    setTimeout(updateSidebarLoginButton, 100);
    
    // Also update when sidebar is re-rendered
    const observer = new MutationObserver(function(mutations) {
        mutations.forEach(function(mutation) {
            if (mutation.target.id === 'sidebarLogin') {
                updateSidebarLoginButton();
            }
        });
    });
    
    const sidebarLogin = document.getElementById('sidebarLogin');
    if (sidebarLogin) {
        observer.observe(sidebarLogin, { childList: true, subtree: true });
    }
});
</script>

<!-- Register Modal JavaScript -->

<!-- Forgot Password Modal JavaScript -->

    <!-- Login Modal -->
    <div class="login-modal" id="loginModal">
        <div class="login-modal-container">
            <div class="login-modal-header">
                <button class="login-modal-close" id="loginModalClose">&times;</button>
                <div class="login-modal-logo-container">
                    <img src="https://comparehub-smartphone-images.s3.af-south-1.amazonaws.com/IMG_20250625_174144.jpg" alt="Logo">
                </div>
            </div>
            <div class="login-modal-form-container">
                <div class="login-modal-form-header">
                    <h2>Welcome Back</h2>
                    <p>Please sign in to your account to continue</p>
                </div>
                <form class="login-modal-form" id="loginModalForm">
                    <div class="login-modal-form-group">
                        <label for="loginModalEmail">Email Address</label>
                        <input type="email" id="loginModalEmail" name="email" placeholder="Enter your email" required>
                    </div>
                    <div class="login-modal-form-group">
                        <label for="loginModalPassword">Password</label>
                        <div class="login-modal-input-wrapper">
                            <input type="password" id="loginModalPassword" name="password" placeholder="Enter your password" required>
                            <button type="button" class="login-modal-password-toggle" id="loginModalPasswordToggle">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                    </div>
                    <div class="login-modal-forgot-password">
                        <a href="#" id="loginModalForgotPassword">Forgot Password?</a>
                    </div>
                    <button type="submit" class="login-modal-btn" id="loginModalBtn">
                        <span id="loginModalBtnText">Sign In</span>
                        <div class="login-modal-spinner" id="loginModalSpinner" style="display: none;"></div>
                    </button>
                </form>
                <div class="login-modal-register-link">
                    Don't have an account? <a href="#" id="loginModalRegisterLink">Sign up here</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Register Modal -->
    <div class="register-modal" id="registerModal">
        <div class="register-modal-container">
            <div class="register-modal-header">
                <button class="register-modal-close" id="registerModalClose">&times;</button>
                <div class="register-modal-logo-container">
                    <img src="https://comparehub-smartphone-images.s3.af-south-1.amazonaws.com/IMG_20250625_174144.jpg"
                         alt="CompareHub Logo">
                </div>
            </div>
            
            <div class="register-modal-form-container">
                <div class="register-modal-form-header">
                    <h2>Create Account</h2>
                    <p>Join thousands saving money with smart comparisons</p>
                </div>
                
                <div id="registerAlertContainer"></div>
                
                <form id="registerModalForm" autocomplete="off">
                    <div class="register-modal-form-group">
                        <div class="register-modal-input-group">
                            <input type="text" class="register-modal-input" id="registerFirstname" placeholder="First Name" required>
                            <i class="fas fa-user register-modal-input-icon"></i>
                        </div>
                    </div>
                    
                    <div class="register-modal-form-group">
                        <div class="register-modal-input-group">
                            <input type="text" class="register-modal-input" id="registerLastname" placeholder="Last Name" required>
                            <i class="fas fa-user register-modal-input-icon"></i>
                        </div>
                    </div>
                    
                    <div class="register-modal-form-group">
                        <div class="register-modal-input-group">
                            <input type="email" class="register-modal-input" id="registerEmail" placeholder="Email Address" required>
                            <i class="fas fa-envelope register-modal-input-icon"></i>
                        </div>
                    </div>
                    
                    <div class="register-modal-form-group">
                        <div class="register-modal-input-group">
                            <input type="password" class="register-modal-input" id="registerPassword" placeholder="Password" required>
                            <button type="button" class="register-modal-password-toggle" onclick="toggleRegisterPassword('registerPassword')">
                                <i class="fas fa-eye" id="registerPassword-eye"></i>
                            </button>
                        </div>
                        <div class="register-modal-password-strength">
                            <div class="register-modal-strength-title">Password Requirements</div>
                            <div class="register-modal-strength-indicators">
                                <div class="register-modal-strength-item" id="register-length-check">
                                    <i class="fas fa-times"></i>
                                    <span>8+ characters</span>
                                </div>
                                <div class="register-modal-strength-item" id="register-upper-check">
                                    <i class="fas fa-times"></i>
                                    <span>Uppercase letter</span>
                                </div>
                                <div class="register-modal-strength-item" id="register-number-check">
                                    <i class="fas fa-times"></i>
                                    <span>Number</span>
                                </div>
                                <div class="register-modal-strength-item" id="register-special-check">
                                    <i class="fas fa-times"></i>
                                    <span>Special character</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="register-modal-form-group">
                        <div class="register-modal-input-group">
                            <input type="password" class="register-modal-input" id="registerConfirmPassword" placeholder="Confirm Password" required>
                            <button type="button" class="register-modal-password-toggle" onclick="toggleRegisterPassword('registerConfirmPassword')">
                                <i class="fas fa-eye" id="registerConfirmPassword-eye"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div class="register-modal-checkbox-group">
                        <div class="register-modal-checkbox">
                            <input type="checkbox" id="registerTerms" required style="position: absolute; opacity: 0; cursor: pointer; height: 100%; width: 100%; margin: 0; z-index: 1;">
                            <div class="register-modal-checkmark"></div>
                        </div>
                        <label for="registerTerms" class="register-modal-checkbox-label" style="cursor: pointer;">
                            I agree to the <a href="Terms-of-Service.html" target="_blank" style="pointer-events: auto;">Terms of Service</a> and <a href="privacy-policy.html" target="_blank" style="pointer-events: auto;">Privacy Policy</a>
                        </label>
                    </div>
                    
                    <button type="submit" class="register-modal-btn" id="registerModalBtn">
                        <i class="fas fa-user-plus"></i>
                        <span id="registerModalBtnText">Create Account</span>
                        <div class="register-modal-spinner" id="registerModalSpinner" style="display: none;"></div>
                    </button>
                </form>
                
                <div class="register-modal-divider">
                    <span>Already have an account?</span>
                </div>
                
                <div class="register-modal-login-link">
                    <a href="#" id="registerModalLoginLink">
                        <i class="fas fa-arrow-left"></i> Sign in instead
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Forgot Password Modal -->
    <div id="forgotPasswordModal" class="forgot-password-modal">
        <div class="forgot-password-modal-container">
            <div class="forgot-password-modal-header">
                <button class="forgot-password-modal-close" onclick="closeForgotPasswordModal()">&times;</button>
                <div class="forgot-password-modal-icon">
                    <i class="fas fa-key"></i>
                </div>
            </div>
            <div class="forgot-password-modal-form-container">
                <div class="forgot-password-modal-form-header">
                    <h2>Reset Password</h2>
                    <p>Enter your email address and we'll send you a code to reset your password.</p>
                </div>
                
                <div id="forgotPasswordAlert" class="forgot-password-modal-alert" style="display: none;"></div>
                
                <form id="forgotPasswordForm">
                    <div class="forgot-password-modal-form-group">
                        <label for="forgotPasswordEmail">Email Address</label>
                        <input
                            type="email"
                            id="forgotPasswordEmail"
                            name="email"
                            placeholder="Enter your email address"
                            required
                        >
                    </div>
                    
                    <button type="submit" class="forgot-password-modal-btn" id="forgotPasswordBtn">
                        <span id="forgotPasswordBtnText">Send Reset Code</span>
                        <div id="forgotPasswordSpinner" class="forgot-password-modal-spinner" style="display: none;"></div>
                    </button>
                </form>
                
                <div class="forgot-password-modal-back-link">
                    <a href="#" onclick="closeForgotPasswordModal(); showLoginModal();">Back to Login</a>
                </div>
            </div>
        </div>
    </div>

</body>
</html>
